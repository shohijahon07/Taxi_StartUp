{"version":3,"file":"Login-BCHUcrWW.js","sources":["../../src/components/auth/Login.jsx"],"sourcesContent":["\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport \"./login.css\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport apicall1 from '../../apicall/apicall1';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setLoading, setShowPassword, setUser } from '../../redux/slices/userSlice';\r\n\r\nfunction Login() {\r\nconst dispatch=useDispatch()\r\nconst {user,loading,showPassword} = useSelector((state) => state.pessenger);\r\n    const navigate = useNavigate();\r\n    function loginUser() {\r\n        if (user.phoneNumber !== '' && user.password !== '') {\r\n            dispatch(setLoading(true));\r\n            apicall1(\"/auth/login\",\"POST\",user).then((res) => {\r\n                    dispatch(setLoading(false));\r\n                    if (res.data) {\r\n                        localStorage.setItem('access_token', res.data.access_token);\r\n                        localStorage.setItem('refresh_token', res.data.refresh_token);\r\n                        dispatch(setUser({ phoneNumber: '', password: '' }));\r\n                        if (res.data.role===\"ROLE_ADMIN\") {\r\n                            navigate(\"/bosh_sahifa\");\r\n\r\n                        }else if(res.data.role===\"ROLE_DRIVER\"){\r\n                            navigate(\"/yo'nalish\");\r\n                        }\r\n                    } else {\r\n                        toast.error(\"Yaroqsiz parol yoki yaroqsiz username.\");\r\n                    }\r\n                })\r\n                .catch(() => {\r\n                    dispatch(setLoading(false));\r\n                    toast.error(\"Tizimga kirishda xatolik yuz berdi.\");\r\n                });\r\n        } else {\r\n            toast.warning(\"Iltimos, barcha maydonlarni to ªldiring.\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={\"big_mean\"} >\r\n            <div className=\"card1\">\r\n                <ToastContainer toastStyle={{ backgroundColor: 'white', color: 'black' }} autoClose={1000} />\r\n\r\n                <h1 >Login</h1>\r\n                <div className=\"input-field\">\r\n                    <PhoneInput\r\n                        inputClass={\"input-field\"}\r\n                        country={\"uz\"}\r\n                        onChange={(e) => dispatch(setUser({ ...user, phoneNumber: '+' + e }))}\r\n                        value={user.phoneNumber}\r\n                    />\r\n                </div>\r\n                <div className=\"input-field\">\r\n                    <input\r\n                        onChange={(e) => dispatch(setUser({ ...user, password: e.target.value }))}\r\n                        value={user.password}\r\n                        placeholder=\"Parol...\"\r\n                        type={showPassword ? \"text\" : \"password\"} // Toggle between text and password\r\n                    />\r\n                    <span \r\n                        className=\"eye-icon\"\r\n                        onClick={() => dispatch(setShowPassword(!showPassword))}\r\n                    >\r\n                        {showPassword ? 'üôà' : 'üëÅÔ∏è'}\r\n                    </span>\r\n                </div>\r\n                <button onClick={loginUser} className=\"buttonS\">\r\n                    {loading ? \"Loading...\" : \"Login to your Account!\"}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"names":["Login","dispatch","useDispatch","user","loading","showPassword","useSelector","state","navigate","useNavigate","loginUser","setLoading","apicall1","res","setUser","toast","jsxs","jsx","ToastContainer","PhoneInput","e","setShowPassword"],"mappings":"qKAUA,SAASA,GAAQ,CACjB,MAAMC,EAASC,IACT,CAAC,KAAAC,EAAK,QAAAC,EAAQ,aAAAC,GAAgBC,EAAaC,GAAUA,EAAM,SAAS,EAChEC,EAAWC,IACjB,SAASC,GAAY,CACbP,EAAK,cAAgB,IAAMA,EAAK,WAAa,IACpCF,EAAAU,EAAW,EAAI,CAAC,EACzBC,EAAS,cAAc,OAAOT,CAAI,EAAE,KAAMU,GAAQ,CACjCZ,EAAAU,EAAW,EAAK,CAAC,EACtBE,EAAI,MACJ,aAAa,QAAQ,eAAgBA,EAAI,KAAK,YAAY,EAC1D,aAAa,QAAQ,gBAAiBA,EAAI,KAAK,aAAa,EAC5DZ,EAASa,EAAQ,CAAE,YAAa,GAAI,SAAU,EAAI,CAAA,CAAC,EAC/CD,EAAI,KAAK,OAAO,aAChBL,EAAS,cAAc,EAElBK,EAAI,KAAK,OAAO,eACrBL,EAAS,YAAY,GAGzBO,EAAM,MAAM,wCAAwC,CACxD,CACH,EACA,MAAM,IAAM,CACAd,EAAAU,EAAW,EAAK,CAAC,EAC1BI,EAAM,MAAM,qCAAqC,CAAA,CACpD,GAELA,EAAM,QAAQ,yCAAyC,CAE/D,CAEA,aACK,MAAI,CAAA,UAAW,WACZ,SAACC,EAAA,KAAA,MAAA,CAAI,UAAU,QACX,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAe,WAAY,CAAE,gBAAiB,QAAS,MAAO,OAAA,EAAW,UAAW,GAAM,CAAA,EAE3FD,EAAAA,IAAC,MAAI,SAAK,OAAA,CAAA,EACVA,EAAAA,IAAC,MAAI,CAAA,UAAU,cACX,SAAAA,EAAA,IAACE,EAAA,CACG,WAAY,cACZ,QAAS,KACT,SAAWC,GAAMnB,EAASa,EAAQ,CAAE,GAAGX,EAAM,YAAa,IAAMiB,CAAE,CAAC,CAAC,EACpE,MAAOjB,EAAK,WAAA,CAAA,EAEpB,EACAa,EAAAA,KAAC,MAAI,CAAA,UAAU,cACX,SAAA,CAAAC,EAAA,IAAC,QAAA,CACG,SAAWG,GAAMnB,EAASa,EAAQ,CAAE,GAAGX,EAAM,SAAUiB,EAAE,OAAO,KAAO,CAAA,CAAC,EACxE,MAAOjB,EAAK,SACZ,YAAY,WACZ,KAAME,EAAe,OAAS,UAAA,CAClC,EACAY,EAAA,IAAC,OAAA,CACG,UAAU,WACV,QAAS,IAAMhB,EAASoB,EAAgB,CAAChB,CAAY,CAAC,EAErD,WAAe,KAAO,KAAA,CAC3B,CAAA,EACJ,EACAY,EAAAA,IAAC,UAAO,QAASP,EAAW,UAAU,UACjC,SAAAN,EAAU,aAAe,wBAC9B,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,CAER"}